<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handleiding package diameter-hoogtecurves • dhcurve</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Handleiding package diameter-hoogtecurves">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dhcurve</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../news/index.html">NEWS</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Handleiding.html">Handleiding</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../CONTRIBUTING.html">Contributing</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://www.natuurenbos.be/">ANB</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/natuurenbos" aria-label="View on Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.facebook.com/natuurenbos/" aria-label="View on Facebook"><span class="fa fa-facebook"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Handleiding package diameter-hoogtecurves</h1>
                        <h4 data-toc-skip class="author">Els Lommelen en
Thierry Onkelinx</h4>
            
            <h4 data-toc-skip class="date">2025-03-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/dhcurve/blob/main/vignettes/Handleiding.Rmd" class="external-link"><code>vignettes/Handleiding.Rmd</code></a></small>
      <div class="d-none name"><code>Handleiding.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="inleiding">Inleiding<a class="anchor" aria-label="anchor" href="#inleiding"></a>
</h2>
<div class="section level3">
<h3 id="situering">Situering<a class="anchor" aria-label="anchor" href="#situering"></a>
</h3>
<p>Een aanbeveling uit het KOBE-project “Meting na hamering” uit 2012
was om het opmeten van boomhoogtes te vervangen door
diameter-hoogtecurves opgesteld aan de hand van bestaande meetgegevens.
Hiermee zou bij de volumeschatting van bomen een tijdswinst gerealiseerd
kunnen worden zonder substantieel in te boeten aan nauwkeurigheid. Om
deze aanbeveling in de praktijk te brengen, is in 2016-2017 het package
<code>dhcurve</code> ontwikkeld.</p>
</div>
<div class="section level3">
<h3 id="doelstellingen">Doelstellingen<a class="anchor" aria-label="anchor" href="#doelstellingen"></a>
</h3>
<p>Het package <code>dhcurve</code> bundelt een aantal functies die
toelaten om “diameter-hoogtecurves” op te stellen op basis van bestaande
meetgegevens van bomen (omtrek en hoogte). Het eindresultaat is een
dataset waarin per boomsoort, domein en omtrekklasse een geschatte
hoogte wordt opgegeven, of een dataset met per
boomsoort-domeincombinatie de parameters A, B en C van de curve
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>=</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte = A + B\log(Omtrek)+C\log(Omtrek)^2</annotation></semantics></math>.</p>
<p>Het model dat gebruikt wordt om een curve op te stellen en/of de
hoogteschattingen te maken, is afhankelijk van het aantal beschikbare
metingen (zie <a href="#definities">definities</a>). Om een betrouwbaar
eindresultaat te bekomen, zijn de keuze van de op te meten bomen en de
validatie van de gegevens belangrijk (zie <a href="#praktische-werkwijze">Praktische werkwijze</a>).
Achtergrondinformatie over de in het package uitgewerkte
berekeningswijze is opgenomen onder <a href="#standaardstramien-voor-berekeningen">Standaardstramien voor
berekeningen</a>.</p>
</div>
<div class="section level3">
<h3 id="definities">Definities<a class="anchor" aria-label="anchor" href="#definities"></a>
</h3>
<p><strong>Basismodel:</strong> Het meest uitgebreide en nauwkeurige
model voor een boomsoort, bestaande uit een overkoepelend deel (= Vlaams
model) en een domeinspecifiek deel dat corrigeert voor de standplaats.
Dit model wordt berekend voor boomsoorten waarvoor meer dan 50 metingen
beschikbaar zijn in minimum 6 domeinen (en enkel voor de domeinen
waarvoor minimum 50 metingen beschikbaar zijn).</p>
<p><strong>Vlaams model:</strong> Het overkoepelend deel van het
basismodel, dus een “gemiddeld model” op Vlaamse schaal voor een
specifieke boomsoort. Zonder correctie voor de standplaats (domein)
geeft dit model een minder accurate schatting.</p>
<p><strong>Afgeleid model:</strong> Domeinspecifiek model waarbij het
Vlaams model gecorrigeerd wordt voor de standplaats door de curve in
hoogte te verschuiven, terwijl de curvevorm van het Vlaams model
behouden wordt. Dit model wordt berekend voor domeinen waar 10 tot 50
metingen beschikbaar zijn op voorwaarde dat er een basismodel berekend
is voor de boomsoort.</p>
<p><strong>Lokaal model:</strong> Domeinspecifiek model waarbij een
eigen curve berekend wordt voor elke boomsoort-domeincombinatie waarvoor
minimum 50 metingen beschikbaar zijn. Dit model is een alternatief van
het basismodel voor boomsoorten waarvan er minder dan 6 domeinen zijn
met 50 metingen. In tegenstelling tot het basismodel heeft het lokaal
model geen soortspecifiek overkoepelend deel, waardoor er geen Vlaams
model kan afgeleid worden. Dit betekent dat er voor boomsoorten waarvoor
dit model opgesteld wordt, geen afgeleide modellen berekend kunnen
worden voor domeinen met minder dan 50 metingen.</p>
<p><strong>Domeinmodel:</strong> Algemene term voor een model dat
specifiek op maat van een boomsoort-domeincombinatie berekend is. Het
kan hier gaan over een basismodel inclusief domeinspecifiek deel, een
afgeleid model of een lokaal model. Deze term moet vooral gezien worden
als een tegenstelling van het Vlaams model, dat een gemiddelde is van
alle domeinen voor een boomsoort.</p>
<p><strong>Bruikbaar interval:</strong> Interval waarbinnen het model in
kwestie gebruikt kan worden. Dit interval is afhankelijk van de
beschikbare gegevens en van het vooraf vastgelegde relevante bereik (zie
<a href="#standaardstramien-voor-berekeningen">Standaardstramien voor
berekeningen</a>).</p>
<p><strong>RMSE:</strong> De <em><strong>R</strong>oot
<strong>M</strong>ean <strong>S</strong>quare
<strong>E</strong>rror</em> <!-- spell-check: ignore --> is een waarde
in meter die aangeeft hoe groot de spreiding van de metingen is t.o.v.
het model en waar in feite ook uit afgeleid kan worden hoe goed het
model de metingen benadert. Gelijkaardig aan de <em>standaard error</em>
kan een betrouwbaarheidsinterval berekend worden voor de geschatte
hoogten (op basis van het model) door 2 maal de waarde van de RMSE op te
tellen en af te trekken van de geschatte hoogte.</p>
</div>
</div>
<div class="section level2">
<h2 id="praktische-werkwijze">Praktische werkwijze<a class="anchor" aria-label="anchor" href="#praktische-werkwijze"></a>
</h2>
<div class="section level3">
<h3 id="vuistregels-voor-de-metingen">Vuistregels voor de metingen<a class="anchor" aria-label="anchor" href="#vuistregels-voor-de-metingen"></a>
</h3>
<div class="section level4">
<h4 id="aantal-op-te-meten-bomen">Aantal op te meten bomen<a class="anchor" aria-label="anchor" href="#aantal-op-te-meten-bomen"></a>
</h4>
<p>Het basismodel, dat het meest uitgebreide modeltype is, heeft enkele
voordelen ten opzichte van de andere modeltypen:</p>
<ul>
<li>het basismodel wordt op het niveau van een boomsoort opgesteld,
waardoor de domeinmodellen deels mee profiteren van de metingen van de
boomsoort in andere domeinen (het globale soortmodel “corrigeert” de
domeinmodellen waar nodig, bv. bij omtrekklassen waar weinig metingen
beschikbaar zijn).<br>
</li>
<li>het basismodel laat toe om afgeleide modellen te berekenen voor
domeinen waarvoor minder metingen van de boomsoort beschikbaar
zijn.</li>
</ul>
<p>Vanwege deze voordelen wordt aangeraden om (voor relevante
boomsoorten en domeinen) te streven naar voldoende metingen om dit
modeltype te kunnen opstellen, zijnde:</p>
<ul>
<li>per domein en boomsoort minstens 50 bomen opmeten verdeeld over de
aanwezige omtrekklassen tussen 0,5 en 2,3 m, maar ook kleinere omtrekken
opmeten</li>
<li>minstens 6 domeinen met voldoende metingen</li>
</ul>
<p>Zolang deze streefcijfers niet gehaald worden, moeten we terugvallen
op de andere modeltypen. Omdat deze gebaseerd zijn op minder metingen,
hebben deze een breder betrouwbaarheidsinterval (af te leiden van een
hoger cijfer voor de RMSE), wat betekent dat de schatting minder precies
is.</p>
</div>
<div class="section level4">
<h4 id="vuistregels-voor-selectie-van-de-bomen">Vuistregels voor selectie van de bomen<a class="anchor" aria-label="anchor" href="#vuistregels-voor-selectie-van-de-bomen"></a>
</h4>
<p>Voor een betrouwbaar resultaat is het belangrijk dat de groep gemeten
bomen representatief is voor alle bomen van die boomsoort en
omtrekklasse die in dat domein staan, wat inhoudt dat ze willekeurig
gekozen moeten worden. De geselecteerde bomen moeten <em>in de mate van
het mogelijke</em> evenredig gespreid zijn over:</p>
<ul>
<li>de beschikbare omtrekklassen</li>
<li>dominante en onderstandige bomen</li>
<li>de verschillende leeftijdsklassen</li>
<li>de bestanden binnen het domein die voor minimum de helft bestaan uit
de boomsoort in kwestie, met een voorkeur voor homogene bestanden</li>
</ul>
<p>De laatste voorwaarde houdt dus enerzijds in dat de voorkeur wordt
gegeven aan metingen in homogene bestanden, omdat het bij een
houtverkoop belangrijk is dat het volume van de dominant voorkomende
boomsoort juist geschat is. Voor de sporadisch voorkomende bomen van een
andere soort in dit bestand is een precieze schatting minder belangrijk,
dus hiervoor volstaan schattingen op basis van metingen in een homogeen
bestand van deze soort.</p>
<p>Anderzijds houdt deze voorwaarde in dat de geselecteerde bomen van de
boomsoort in kwestie evenredig gespreid moeten zijn over de relevante
bestanden (dus de bestanden die homogeen zijn voor deze boomsoort of die
minimum voor de helft bestaan uit deze boomsoort).</p>
</div>
<div class="section level4">
<h4 id="proefvlak">Proefvlak<a class="anchor" aria-label="anchor" href="#proefvlak"></a>
</h4>
<p>De modellen worden berekend op basis van metingen op domeinniveau,
dus puur technisch worden er geen vereisten opgelegd in verband met de
verdeling van de bomen over de bestanden of het gebruik van proefvlakken
of steekproefcirkels.</p>
<p>Om bovenstaande vuistregels te volgen en een subjectieve keuze van de
te meten bomen te vermijden, kan het gebruik van een proefvlak echter
een voordeel zijn. Nadeel is dat het meer tijd vraagt, en dat het
moeilijker is om van alle omtrekklassen voldoende metingen te hebben. Er
zou ook gedacht kunnen worden aan een alternatief voor een proefvlak,
bijvoorbeeld een rechte lijn door het bos waarlangs alle bomen opgemeten
worden.</p>
</div>
<div class="section level4">
<h4 id="clusteren-van-boomsoorten-enof-domeinen">Clusteren van boomsoorten en/of domeinen<a class="anchor" aria-label="anchor" href="#clusteren-van-boomsoorten-enof-domeinen"></a>
</h4>
<p><strong>Kunnen boomsoorten als ruwe en zachte berk of zomer- en
wintereik samengevoegd worden tot berk of inlandse eik?</strong>
Technisch is dit geen probleem: na het inladen van de gegevens uit de
databank en voor het uitvoeren van de analysestappen uit het
<code>dhcurve</code>-package kan extra code geschreven worden om deze
soorten dezelfde naam en ID-nummer te geven, waardoor ze bij de analyse
automatisch als dezelfde soort beschouwd worden. De beslissing welke
soorten mogen samengevoegd worden omdat ze dezelfde groeivorm hebben,
vereist echter een goede kennis van de boomsoorten. (Eventueel zou voor
deze beslissing bijkomend gekeken kunnen worden naar beschikbare
metingen en/of modellen van de samen te voegen soorten.) Daarnaast kan -
met kennis van zaken - het model van de ene boomsoort gebruikt worden
voor een andere soort waarvoor te weinig gegevens beschikbaar zijn.
Kortom, dit zijn eerder inhoudelijke keuzes die geen impact hebben op de
werking van <code>dhcurve</code>.</p>
<p><strong>Wat als een domein te weinig metingen heeft en een naburig
gelijkaardig domein wel een goed model heeft? Kan dat model dan gebruikt
worden om voorspellingen te doen voor het andere domein?</strong>
Initieel was de opzet van het project om “gelijkaardige” domeinen te
clusteren op een zodanige manier dat per cluster eenzelfde model kon
gebruikt worden. Maar bij de verkennende studie (uitwerken
standaardstramien) bleek dat er geen clustering van domeinen mogelijk
was op basis van ecoregio, bodemtype, provincie (~ beheermethode), noch
vonden we ruimtelijke patronen op basis van de ligging binnen Vlaanderen
die tot enige clustering zou kunnen leiden (zie <a href="#afgeleid-model">Standaardstramien voor berekeningen / Keuze van
modellen / Afgeleid model</a>). Dus op een systematische wijze domeinen
samenvoegen op basis van bovenstaande variabelen om eenzelfde model te
kunnen gebruiken, lukt niet. Maar met voldoende voorkennis over bepaalde
dichtbij elkaar gelegen bosdomeinen en eventueel een vergelijking van
beschikbare metingen / modellen (bv. van andere soorten van dezelfde
domeinen) kan het misschien voor bepaalde domeinen te verantwoorden zijn
om dezelfde modellen te gebruiken? Zo zijn de curves van Heverleebos en
Meerdaalwoud zeer gelijkaardig, maar in Bertembos blijkt de hoogte bij
dezelfde omtrekklasse lager te zijn.</p>
<p>Technisch kan - net zoals bij de boomsoorten - ook voor domeinen
gespeeld worden met het samenvoegen of opsplitsen van domeinen: zodra
gegevens eenzelfde <code>domeinID</code> hebben, worden ze bij de
berekeningen als behorend tot eenzelfde domein beschouwd. Dit biedt dus
ook de mogelijkheid om afwijkende bestanden in eenzelfde domein te
beschouwen als afzonderlijke domeinen.</p>
</div>
</div>
<div class="section level3">
<h3 id="berekenen-van-curves">Berekenen van curves<a class="anchor" aria-label="anchor" href="#berekenen-van-curves"></a>
</h3>
<p>De zogenaamde diameter-hoogtecurves, die in feite omtrek-hoogtecurves
zijn, kunnen berekend worden door het hieronder weergegeven
voorbeeldscript te runnen voor een opgegeven dataset Data (zie <a href="#initiatie">initiatie</a>). Hierbij is het de bedoeling dat bij
elke validatiestap een validatie gebeurt, waarna het script met de
gevalideerde data opnieuw gerund wordt (zie <a href="#validatie">validatie</a>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://inbo.github.io/dhcurve">dhcurve</a></span><span class="op">)</span></span>
<span><span class="co">#Eerst de gegevens uit de databank opladen (hier niet opgenomen)</span></span>
<span></span>
<span><span class="va">Datalijst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initiatie.html">initiatie</a></span><span class="op">(</span><span class="va">Data</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Data.basis</span> <span class="op">&lt;-</span> <span class="va">Datalijst</span><span class="op">[[</span><span class="st">"Basis"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">Data.afgeleid</span> <span class="op">&lt;-</span> <span class="va">Datalijst</span><span class="op">[[</span><span class="st">"Afgeleid"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">Data.lokaal</span> <span class="op">&lt;-</span> <span class="va">Datalijst</span><span class="op">[[</span><span class="st">"Lokaal"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">Data.rest</span> <span class="op">&lt;-</span> <span class="va">Datalijst</span><span class="op">[[</span><span class="st">"Rest"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">Basismodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit.basis.html">fit.basis</a></span><span class="op">(</span><span class="va">Data.basis</span><span class="op">)</span></span>
<span><span class="va">AfwijkendeMetingen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.basis.html">validatie.basis</a></span><span class="op">(</span><span class="va">Basismodel</span><span class="op">)</span></span>
<span><span class="co">#metingen nakijken en vlaggen in de databank vooraleer verder te gaan!</span></span>
<span></span>
<span><span class="va">Afgeleidmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit.afgeleid.html">fit.afgeleid</a></span><span class="op">(</span><span class="va">Data.afgeleid</span>, <span class="va">Basismodel</span><span class="op">)</span></span>
<span><span class="va">AfwijkendeMetingen2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.afgeleid.html">validatie.afgeleid</a></span><span class="op">(</span><span class="va">Basismodel</span>, <span class="va">Afgeleidmodel</span><span class="op">)</span></span>
<span><span class="co">#metingen nakijken en vlaggen in de databank vooraleer verder te gaan!</span></span>
<span></span>
<span><span class="va">Lokaalmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fit.lokaal.html">fit.lokaal</a></span><span class="op">(</span><span class="va">Data.lokaal</span><span class="op">)</span></span>
<span><span class="va">AfwijkendeMetingen3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.lokaal.html">validatie.lokaal</a></span><span class="op">(</span><span class="va">Lokaalmodel</span>, <span class="va">Data.lokaal</span><span class="op">)</span></span>
<span><span class="co">#metingen nakijken en vlaggen in de databank vooraleer verder te gaan!</span></span>
<span></span>
<span><span class="co">#om te gebruiken in IVANHO</span></span>
<span><span class="va">OutputIvanho</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/outputIVANHO.html">outputIVANHO</a></span><span class="op">(</span><span class="va">Basismodel</span>, <span class="va">Afgeleidmodel</span>, <span class="va">Lokaalmodel</span>, <span class="va">Data.lokaal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv2</a></span><span class="op">(</span><span class="va">OutputIvanho</span>, <span class="st">"IVANHO.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#voor een lijst met de modelparameters en foutenmarge (RMSE):</span></span>
<span><span class="va">Resultaat</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/resultaat.html">resultaat</a></span><span class="op">(</span><span class="va">Basismodel</span>, <span class="va">Afgeleidmodel</span>, <span class="va">Lokaalmodel</span>, <span class="va">Data.lokaal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv2</a></span><span class="op">(</span><span class="va">Resultaat</span>, <span class="st">"DHcurves.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Eventueel, bij voldoende metingen van hogere omtrekklassen</span></span>
<span><span class="va">UitbreidingBasis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.uitbreiding.html">validatie.uitbreiding</a></span><span class="op">(</span><span class="va">Basismodel</span>, <span class="va">Data.basis</span><span class="op">)</span></span>
<span><span class="va">UitbreidingLokaal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.uitbreiding.html">validatie.uitbreiding</a></span><span class="op">(</span><span class="va">Lokaalmodel</span>, <span class="va">Data.lokaal</span><span class="op">)</span></span>
<span><span class="va">Uitbreiding</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">UitbreidingBasis</span>, <span class="va">UitbreidingLokaal</span><span class="op">)</span></span>
<span><span class="va">OutputIvanho</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/outputIVANHO.html">outputIVANHO</a></span><span class="op">(</span><span class="va">Basismodel</span>, <span class="va">Afgeleidmodel</span>, <span class="va">Lokaalmodel</span>, <span class="va">Data.lokaal</span>,</span>
<span>               Uitbreiding <span class="op">=</span> <span class="va">Uitbreiding</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv2</a></span><span class="op">(</span><span class="va">OutputIvanho</span>, <span class="st">"IVANHO_uitbreiding.csv"</span><span class="op">)</span></span></code></pre></div>
<p>De stappen “fit” en “validatie” worden achtereenvolgens doorlopen
voor de verschillende modeltypen (basismodel, afgeleid model en lokaal
model). Deze stappen (inclusief de initiatiestap en de finale stappen)
worden hieronder kort toegelicht vanuit praktisch oogpunt, met focus op
de workflow en aandachtspunten. Voor meer informatie over het gebruik
van de functies (om ze bv. buiten deze standaard workflow te gebruiken)
verwijzen we naar de helpfunctie van de functie in kwestie (in R aan te
roepen door <code>?&lt;functienaam&gt;</code>), voor
achtergrondinformatie over de achterliggende berekeningen verwijzen we
naar het laatste deel van dit document: <a href="#standaardstramien-voor-berekeningen">Standaardstramien voor
berekeningen</a>.</p>
<div class="section level4">
<h4 id="initiatie">Initiatie<a class="anchor" aria-label="anchor" href="#initiatie"></a>
</h4>
<p>De curves worden berekend op basis van een dataframe
<code>Data</code> met metingen van bomen, die de volgende informatie
moet bevatten:</p>
<ul>
<li>
<code>DOMEIN_ID</code>: het identificatienummer van het domein</li>
<li>
<code>BOS_BHI</code>: de naam van het domein</li>
<li>
<code>IDbms</code>: het identificatienummer van de boomsoort</li>
<li>
<code>BMS</code>: de naam van de boomsoort</li>
<li>
<code>C13</code>: de omtrek van de boom in cm (gemeten op 130 cm
hoogte)</li>
<li>
<code>HOOGTE</code>: de hoogte van de boom in meter</li>
<li>
<code>Status</code>: in hoeverre er foutcontrole op de meting gedaan
is, mogelijke categorieën: “Niet gecontroleerd”, “Te controleren”,
“Goedgekeurd”, “Afgekeurd”, “Negeren”, “Aangepast”,…</li>
</ul>
<p>Bedoeling is dat gegevens met status anders dan “Niet gecontroleerd”,
“Te controleren” of “Goedgekeurd” voor het uitvoeren van deze
initiatiestap uit de dataset verwijderd worden.</p>
<p>Bij de initiatiestap wordt op basis van de omtrek <code>C13</code>
(in te voeren in cm!) een omtrekklasse berekend met eenheid in meter en
alle verdere rekenstappen gebeuren in meter.</p>
<p>De hier berekende omtrekklassen komen overeen met deze in
<code>IVANHO</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;ANB databank met metingen voor houtverkoop&lt;/p&gt;"><sup>1</sup></a> (gemeten op 1,3 m hoogte): ze gaan omhoog
met stappen van 0,1 m (10 cm), bv. de klasse van 0,35 m bevat de bomen
met omtrek tussen 0,3 en 0,4 m. Het klassenmidden van de omtrekklasse
(in het voorbeeld 0,35 m) wordt opgeslagen in de variabele
<code>Omtrek</code>, in een finale fase wordt uit deze variabele het
interval van de klassengrenzen afgeleid.</p>
<p>De verdere analysen gebeuren voornamelijk op basis van bomen met
omtrek tussen 0,5 en 2,3 m, wat betekent dat de gegevens van zeer dunne
en zeer dikke bomen niet gebruikt worden (zie <a href="#standaardstramien-voor-berekeningen">Standaardstramien voor
berekeningen</a> voor meer achtergrondinformatie over deze keuze).
Daarom worden bomen met omtrek kleiner dan 0,2 m en groter dan 3 m al
tijdens deze initiatiestap uit de dataset verwijderd. Bomen met omtrek
groter dan 2,4 m worden gevlagd (<code>VoorModelFit</code> =
<code>FALSE</code>) en genegeerd bij de bouw van het model. Om enige
controle te hebben over wat verwijderd wordt en eventuele fouten te
kunnen rechtzetten, genereert de functie <code><a href="../reference/initiatie.html">initiatie()</a></code> een
overzichtsrapport met instructies hoe de grootste problemen gemakkelijk
opgespoord kunnen worden. (Een potentiële fout hier is het gebruik van
een verkeerde eenheid voor de metingen, en het ten onrechte verwijderen
van een boom kan gevolgen hebben voor het al dan niet kunnen fitten van
een bepaald modeltype.)</p>
<p>Behalve <code>Omtrek</code> berekent de functie
<code><a href="../reference/initiatie.html">initiatie()</a></code> nog enkele andere variabelen die nodig zijn
voor de analysestappen. Daarna wordt de dataset opgesplitst in 4 delen
in functie van de modeltypen waarvoor de gegevens gebruikt kunnen worden
(waarbij de gegevens van elke boomsoort-domeincombinatie worden
toegevoegd aan het meest ambitieuze modeltype dat haalbaar is):</p>
<ul>
<li>Basismodel (boomsoorten met &gt; 50 metingen per domein in de
omtrekklassen tussen 0,5 en 2,3 m en &gt;= 6 domeinen)</li>
<li>Afgeleid model (domeinen met &lt; 50 metingen in de omtrekklassen
tussen 0,5 en 2,3 m en &gt; 10 metingen in de omtrekklassen tussen 0,5
en 2,8 m, voor boomsoorten waarvoor basismodel opgesteld is)</li>
<li>Lokaal model (boomsoorten met &gt; 50 metingen per domein in de
omtrekklassen tussen 0,5 en 2,3 m en &lt; 6 domeinen)</li>
<li>Rest (alle overblijvende gegevens, dus gegevens die niet gebruikt
kunnen worden om een model te fitten)</li>
</ul>
<p>De functie geeft een list terug met deze 4 datasets als items met
namen “Basis”, “Afgeleid”, “Lokaal” en “Rest”. De 3 eerstgenoemde
datasets kunnen gebruikt worden om de verschillende modeltypen te
berekenen. Als er metingen van te dunne en te dikke bomen verwijderd
zijn, worden deze toegevoegd als vijfde dataset.</p>
</div>
<div class="section level4">
<h4 id="fit">Fit<a class="anchor" aria-label="anchor" href="#fit"></a>
</h4>
<p>Voor elk van de drie hierboven geselecteerde datasets wordt een
gepast model berekend of “gefit” op basis van een voor dat modeltype
specifieke functie. De output is voor elk modeltype verschillend; de
functies waarbij deze modeltypen als parameter meegegeven moeten worden,
zijn aangepast om met deze verschillen om te gaan (of zijn ook
modelspecifiek).</p>
<p>Een aandachtspunt is dat het berekende basismodel (in feite het
hieruit af te leiden Vlaams model) nodig is om het afgeleid model te
kunnen berekenen; het lokaal model is onafhankelijk van deze en kan dus
afzonderlijk berekend worden.</p>
<p>Als een lege dataset als parameter meegegeven wordt, zal de functie
<code>fit.xxx()</code> een foutmelding geven. Als de reden voor deze
lege dataset onduidelijk is, is het aan te raden om het
overzichtsrapport gegenereerd door de functie <code><a href="../reference/initiatie.html">initiatie()</a></code>
te bekijken. Om de berekeningen enkel te doen voor de andere modeltypen
(waarvan de dataset niet leeg is), moet het hierboven weergegeven script
aangepast worden door alles wat met deze functie te maken heeft, te
verwijderen: het blokje script met <code>fit.xxx()</code> en
<code>validatie.xxx()</code>, en onderaan de desbetreffende parameter(s)
in de functies <code><a href="../reference/outputIVANHO.html">outputIVANHO()</a></code> en/of
<code><a href="../reference/resultaat.html">resultaat()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="validatie">Validatie<a class="anchor" aria-label="anchor" href="#validatie"></a>
</h4>
<p>Idee van de validatiestap is om aan foutcontrole te doen, waar nodig
de gegevens in de databank aan te passen, de analyse te herhalen met de
aangepaste gegevens en deze cyclus voor de basismodellen te herhalen
“tot alles in orde is”. Daarna kan verder gegaan worden met de analyse
van de afgeleide modellen, waar bij de validatie weer dezelfde cyclische
procedure doorlopen wordt. Vermits nu de basismodellen in orde zijn, mag
hier de (tijdrovende) validatiestap overgeslagen worden. Deze functie
moet dus niet meer opnieuw gerund worden zolang er geen aanpassingen
zijn in de hiervoor gebruikte gegevens in de dataset. Na de validatie
van de afgeleide modellen, is het de beurt aan de lokale modellen.</p>
<p>De validatie gebeurt op basis van een validatierapport dat de functie
<code>validatie.xxx()</code> genereert, waarin de modellen (curves) en
de meetresultaten (stippen) grafisch weergegeven zijn, met potentiële
afwijkingen in rood. Enkel grafieken met potentiële afwijkingen worden
in het rapport opgenomen, wat betekent dat het aantal te controleren
grafieken vermindert naargelang er meer problemen opgelost worden.
Idealiter stopt de validatiestap dus met een leeg validatierapport, in
elk geval stopt de validatiestap pas zodra de validator geoordeeld heeft
dat geen van de potentiële afwijkingen (in rood) in het validatierapport
effectief een probleem vormen.</p>
<p>Belangrijk is dat de validatie in 2 stappen gebeurt, waarbij de
tweede stap pas uitgevoerd mag worden van zodra de eerste stap volledig
in orde is. Als in de tweede stap aanpassingen gebeuren, moet bij de
volgende cyclus ook de eerste stap opnieuw bekeken worden. (Door
aanpassingen in de databank verandert telkens het model en ook de
afwijkende metingen, die op basis van het model berekend worden.)</p>
<div class="section level5">
<h5 id="stap-1-afwijkende-metingen">Stap 1: afwijkende metingen<a class="anchor" aria-label="anchor" href="#stap-1-afwijkende-metingen"></a>
</h5>
<p>Bedoeling hier is dat de meest afwijkende meetresultaten
gecontroleerd worden op juistheid en uiteindelijk in de databank de
status “Goedgekeurd”, “Afgekeurd”, “Negeren”, “Aangepast”,… krijgen.
Deze te controleren afwijkingen worden weergegeven als rode stippen in
de grafieken in het validatierapport. (Het gaat hier over de
meetresultaten die het meest afwijken van de modelcurve met uitzondering
van de meetresultaten die al de status “Goedgekeurd” hebben.)</p>
<p>De functie <code>validatie.xxx()</code> geeft de afwijkende metingen
ook als dataframe terug, wat toelaat om de status van de betreffende
meetresultaten (die in principe op “Niet gecontroleerd” staan) in de
databank scriptmatig aan te passen naar “Te controleren”. Een voorbeeld
(enkel uitgewerkt voor <code>Bosdat</code>-gegevens):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AfwijkendeMetingen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validatie.basis.html">validatie.basis</a></span><span class="op">(</span><span class="va">Basismodel</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># De query waarmee je de aanpassing in de databank kan maken</span></span>
<span><span class="va">updatequeryBosdat</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">"UPDATE tblBosdatMetingen</span></span>
<span><span class="st">  SET Status = 'Te controleren'</span></span>
<span><span class="st">  WHERE Status = 'Niet gecontroleerd' AND rownames IN ('%s')"</span></span>
<span></span>
<span><span class="co"># Lijst maken met alle id's (die in dit geval overeenkomen met 'rownames' in de</span></span>
<span><span class="co"># databank) van de records die aangepast moeten worden</span></span>
<span><span class="va">IDafwijkendeMetingen</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">AfwijkendeMetingen</span><span class="op">$</span><span class="va">ID</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">"','"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Deze lijst in de query plakken (sprintf vervangt %s in de string</span></span>
<span><span class="co"># 'updatequeryBosdat' door de inhoud van IDafwijkendemetingen)</span></span>
<span><span class="va">query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="va">updatequeryBosdat</span>, <span class="va">IDafwijkendeMetingen</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#connecteren met de databank en de query uitvoeren</span></span>
<span><span class="va">connectieGegs</span> <span class="op">&lt;-</span> <span class="fu">odbcConnectAccess2007</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dbpath</span>, <span class="st">"DiamHoogteMetingen.accdb"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">Test</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">sqlQuery</span><span class="op">(</span><span class="va">connectieGegs</span>, <span class="va">query</span><span class="op">)</span></span>
<span><span class="fu">odbcClose</span><span class="op">(</span><span class="va">connectieGegs</span><span class="op">)</span></span></code></pre></div>
<p>Na het “verwijderen” (= als afgekeurd of negeren labelen) of
aanpassen van gegevens is het belangrijk om de gegevens opnieuw in te
laden en het model opnieuw te berekenen. Dit zal immers wijzigen,
waardoor er mogelijk andere metingen als afwijkend aangeduid zullen
worden.</p>
<p>Meermaals alle afwijkende metingen verwijderen zal tot gevolg hebben
dat de foutenmarge smaller wordt (waardoor er telkens nieuwe afwijkende
metingen aangeduid worden) en dat uiteindelijk enkel bomen met “ideale
verhoudingen” overblijven. Op dat moment zal het model geen reflectie
meer zijn van een realistische situatie, omdat de natuurlijke variatie
ontbreekt. In het slechtste geval worden afwijkende metingen verwijderd
tot er niet meer genoeg gegevens overblijven om het gekozen modeltype te
fitten. Het is dus geen goed idee om systematisch alle afwijkende
metingen te verwijderen.</p>
<p>Het goedkeuren van afwijkende metingen zal sneller tot een stabiel
model leiden (niets verwijderen verandert het model niet), al is het
uiteraard wel de bedoeling dat foute of onbetrouwbare metingen
verwijderd worden. Deze beïnvloeden immers het model in negatieve zin,
zeker als ze sterk afwijken van de andere meetresultaten en/of in de
hoogste of laagste omtrekklassen voorkomen.</p>
<p>Je mag pas verdergaan naar stap 2 als alle rode stippen uit het
validatierapport verdwenen zijn.</p>
</div>
<div class="section level5">
<h5 id="stap-2-afwijkende-curves">Stap 2: afwijkende curves<a class="anchor" aria-label="anchor" href="#stap-2-afwijkende-curves"></a>
</h5>
<p>Deze stap moet enkel gebeuren bij het basismodel en het lokaal model,
niet bij het afgeleid model. (Dit omdat de curvevorm van het afgeleid
overgenomen wordt van het basismodel en bijgevolg daar al gecontroleerd
is.)</p>
<p>Bedoeling van deze tweede stap is om aan de hand van de curvevorm na
te gaan of het model geen te sterke afwijkingen vertoont en dus
bruikbaar is als model. Mogelijk afwijkende delen in de curves zijn in
rood getekend.</p>
<p><strong>Welke problemen kunnen optreden en hoe
beoordelen?</strong></p>
<ul>
<li>“curvevorm hol bij lage omtrekklassen”: dit is waarschijnlijk geen
probleem als het rood gekleurde deel maar 1-2 omtrekklassen omvat of als
de curve min of meer recht is. Wel problematisch zijn een U-vormige
curve, een curve in de vorm van hockeystick of een S-vormige curve.</li>
<li>“curve daalt terug bij hoge omtrekklassen”: dit is geen probleem als
het rood gekleurde deel minder dan 5 omtrekklassen omvat, en het is wel
een probleem als het gaat over een aanzienlijk deel van de curve. Houd
bij de beoordeling in het achterhoofd dat voor de hoogteschattingen voor
<code>IVANHO</code> de maximale hoogte van de curve zal gebruikt worden
voor de (rood gekleurde) hogere omtrekklassen. De “curve” zal hier met
andere woorden niet dalen maar horizontaal lopen.</li>
</ul>
<p><em>Wat met de probleemcurves?</em> Deze curves zijn niet goed genoeg
om te gebruiken als model in <code>IVANHO</code> (of elders), en er
moeten bijkomende metingen uitgevoerd worden vooraleer dit model
eventueel kan verbeteren. Dus tot deze extra metingen gebeurd zijn,
willen we dit model eigenlijk niet gebruiken. Als het gaat over een
berekend basismodel, kunnen de gegevens eventueel wel gebruikt worden om
een afgeleid model te berekenen voor dit domein.</p>
<p>Praktisch pakken we dit aan door voor die specifieke
boomsoort-domeincombinatie het minimum aantal bomen om een basismodel
(of lokaal model) te berekenen, op te trekken. We raden aan om als
nieuwe grenswaarde 10 bomen meer te nemen dan het huidige aantal bomen
(met omtrek groter dan 0,5 m). Redenering: 1 extra gemeten boom zal de
curve niet substantieel verbeteren, 10 misschien wel? In de functie
<code><a href="../reference/initiatie.html">initiatie()</a></code> is de mogelijkheid voorzien om als parameter
een dataframe mee te geven met de uitzonderingen voor deze minimumwaarde
van 50 bomen. Deze laat ook toe om de minimumwaarde voor het afgeleid
model (standaard 10 bomen) op te trekken ingeval er problemen zijn met
deze curve (bv. meetresultaten te verspreid).</p>
<p>Onderstaand voorbeeld toont hoe de limiet van het aantal bomen voor
Zomereik in de Gavers opgetrokken wordt naar 65 bomen (momenteel zijn
hier 55 bomen met omtrek groter dan 0,5 m opgemeten en stel dat we de
curve niet betrouwbaar genoeg vinden omdat er te weinig bomen opgemeten
zijn in de hogere omtrekklassen). De limiet voor het afgeleide model
houden we bij 10 bomen (min_afgeleid = NA, dus we kennen hier geen
waarde toe).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dataframe aanmaken met nieuwe limiet(en)</span></span>
<span><span class="va">Uitzonderingen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>DOMEIN_ID <span class="op">=</span> <span class="st">"DomWVL09033"</span>,</span>
<span>                             BMS <span class="op">=</span> <span class="st">"Zomereik"</span>,</span>
<span>                             min_basis <span class="op">=</span> <span class="fl">65</span>, min_afgeleid <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                             stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Datalijst_nieuw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initiatie.html">initiatie</a></span><span class="op">(</span><span class="va">Data</span>, <span class="va">Uitzonderingen</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#en met deze datasets de modellen opnieuw berekenen</span></span></code></pre></div>
<p>Qua workflow zou het zinvol kunnen zijn om deze uitzonderingen op te
slaan in een spreadsheet of databank, eerder dan dit hard te coderen in
een script.</p>
<p>Als geen van de afwijkende (rode) curves in het validatierapport een
probleem zijn, mag je verdergaan (ondanks het feit dat het
validatierapport nog niet leeg is). Eventueel kan gekozen worden om deze
afwijkende curves tijdelijk niet meer in het rapport te tonen door
gebruik te maken van de parameter
<code>GoedgekeurdeAfwijkendeCurves</code> (functies
<code><a href="../reference/validatie.basis.html">validatie.basis()</a></code> en <code><a href="../reference/validatie.lokaal.html">validatie.lokaal()</a></code>). Het
gebruik van deze parameter is gelijkaardig aan
<code>uitzonderingen</code> in de zin dat opgegeven moet worden vanaf
hoeveel metingen een curve terug getoond moet worden (als deze nog
steeds afwijkend is).</p>
<p><strong>OPMERKING</strong> Er kunnen ook andere problemen optreden
waarop niet expliciet wordt gevalideerd, bijvoorbeeld een slechte
verdeling van de bomen over de verschillende omtrekklassen. Bij het
basismodel gaat hier de curve sterk aanleunen tegen het Vlaams model,
bij het lokaal model gaat hier de curve recht door de weinige aanwezige
metingen (die niet per definitie “gemiddeld” zijn). Ook hier kan beslist
worden om het model voorlopig niet te gebruiken (in afwachting van meer
metingen) door bovenstaande methode.
<!-- evt. nog inwerken in package? --></p>
</div>
</div>
<div class="section level4">
<h4 id="outputivanho">
<code>outputIVANHO</code><a class="anchor" aria-label="anchor" href="#outputivanho"></a>
</h4>
<p>De functie <code><a href="../reference/outputIVANHO.html">outputIVANHO()</a></code> genereert op basis van de
berekende (gefitte) modellen een tabel met per
boomsoort-domeincombinatie en per omtrekklasse een geschatte hoogte, om
te gebruiken in <code>IVANHO</code>. Deze schatting wordt ingeval van
een minimum of maximum binnen het interval verbeterd ten opzichte van
het berekende model door de maximale hoogte ook te gebruiken voor
omtrekklassen hoger dan het maximum, en de minimale hoogte ook te
gebruiken voor omtrekklassen lager dan het maximum. De “curve” zal met
andere woorden niet terug dalen of stijgen, maar horizontaal lopen. Een
omtrekklasse wordt weggelaten als de geschatte hoogte lager is dan 2,5
m.</p>
</div>
<div class="section level4">
<h4 id="resultaat">
<code>resultaat</code><a class="anchor" aria-label="anchor" href="#resultaat"></a>
</h4>
<p>De functie <code><a href="../reference/resultaat.html">resultaat()</a></code> genereert op basis van de
berekende (gefitte) modellen een tabel met volgende info:</p>
<ul>
<li><code>DomeinID</code></li>
<li>
<code>BMS</code> (boomsoort)</li>
<li>
<code>Modeltype</code>: basismodel / afgeleid model / lokaal model /
geen model</li>
<li>parameters <code>A</code>, <code>B</code> en <code>C</code> per
model en per boomsoort</li>
<li>bruikbaar interval (<code>Q5k</code> en <code>Q95k</code>)</li>
<li><code>RMSE</code></li>
<li>
<code>nBomen</code>: aantal metingen met omtrek &lt; 3 m</li>
<li>
<code>nBomenOmtrek05</code>: aantal metingen tussen 0.5 en 2,8 m
(dus het aantal metingen waarop het afgeleid model gebaseerd is)</li>
<li>
<code>nBomenInterval</code>: aantal metingen waarop het model
gebaseerd is (ingeval van basismodel of lokaal model)</li>
<li>
<code>nBomenIntervalOmtrek05</code>: aantal metingen &gt; 0.5 m
binnen het interval (dus het aantal metingen waarop de RMSE-berekening
van het basismodel en lokaal model gebaseerd is)</li>
</ul>
</div>
<div class="section level4">
<h4 id="uitbreiding-naar-hogere-omtrekklassen">uitbreiding naar hogere omtrekklassen<a class="anchor" aria-label="anchor" href="#uitbreiding-naar-hogere-omtrekklassen"></a>
</h4>
<p>Als een basismodel of lokaal model meer dan 10 metingen heeft voor
omtrekklassen boven het bruikbaar interval, dan kunnen curves desgewenst
uitgebreid worden naar die hogere omtrekklassen. Dit gebeurt door het
model dat gebouwd is op basis van de omtrekklassen binnen het bruikbaar
interval, toe te passen op de hogere omtrekklassen (tot 3,0 m en maximum
10 omtrekklassen), en de curves te valideren met de functie
<code><a href="../reference/validatie.uitbreiding.html">validatie.uitbreiding()</a></code>.</p>
<p>Deze functie geeft, gelijkaardig aan de andere validatiefuncties, in
een validatierapport de 20 slechtste curves weer (van slechtste naar
minst slechte). Bedoeling hier is om te controleren of het blauw
gekleurde deel van de curve een goede benadering is voor de in blauw
weergegeven punten, dus of dit deel van de curve midden door de
puntenwolk gaat. Gelijkaardig aan de andere validatiefuncties, kan een
slechte curve genegeerd worden door het minimum aantal metingen voor een
uitbreiding op te trekken door bij argument <code>Uitzonderingen</code>
in functie <code><a href="../reference/initiatie.html">initiatie()</a></code> een waarde mee te geven in kolom
<code>min_uitbreiden_model</code> (en daarna de functies opnieuw te
runnen). Ook kan gekozen worden om goedgekeurde uitbreidingen tijdelijk
niet te tonen in het validatierapport met een argument
<code>GoedgekeurdeUitbreidingen</code> in functie
<code><a href="../reference/validatie.uitbreiding.html">validatie.uitbreiding()</a></code>, dat gelijkaardig werkt aan
<code>GoedgekeurdeAfwijkendeCurves</code> in andere
validatie-functies.</p>
<p>Deze functie geeft een tabel met waarden terug die als argument
<code>Uitbreiding</code> meegegeven kan worden in
<code><a href="../reference/outputIVANHO.html">outputIVANHO()</a></code> om de uitbreidingen toe te voegen aan de
output van deze laatste functie.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="standaardstramien-voor-berekeningen">Standaardstramien voor berekeningen<a class="anchor" aria-label="anchor" href="#standaardstramien-voor-berekeningen"></a>
</h2>
<p>Terwijl het vorige hoofdstuk eerder praktijkgericht was, behandelt
dit hoofdstuk de achterliggende berekeningen van de verschillende
functies, alsook de redenen waarom voor een bepaalde aanpak of
berekeningswijze gekozen is.</p>
<p>Kort gezegd laat dit package toe om de hoogtes van bomen te schatten
door middel van een model, dat we opstellen op basis van eerder
uitgevoerde metingen per boomsoort-domeincombinatie. Een model is altijd
een benadering van werkelijkheid, dat er liefst zo goed mogelijk bij
aansluit (cfr. George Box: “All models are wrong, but some are useful”).
<!-- spell-check: ignore --> Belangrijk is dat het model vooral een
goede voorspelling geeft binnen de relevante scope. Hoe breder deze
scope gedefinieerd wordt, hoe moeilijker het is om een model te vinden
dat de werkelijkheid overal goed gaat benaderen en hoe groter de kans
dat het model ergens meer afwijkt dan wenselijk. Hoe smaller de scope,
hoe nauwkeuriger de voorspelling van het model, maar het model is dan
ook enkel bruikbaar binnen deze scope. Om een optimaal model te vinden,
komt het er dus op aan om deze scope zo goed mogelijk af te bakenen:
niet te smal, maar ook niet te breed. Daarnaast moeten ook voor het
model zelf afwegingen en keuzes gemaakt worden, o.a. met betrekking tot
complexiteit en betrouwbaarheid. De keuzes die voor de modellen in dit
package gemaakt zijn en de achterliggende redenen worden in dit
hoofdstuk behandeld.</p>
<div class="section level3">
<h3 id="bruikbaar-interval">Bruikbaar interval<a class="anchor" aria-label="anchor" href="#bruikbaar-interval"></a>
</h3>
<div class="section level4">
<h4 id="omtrekklassen">Omtrekklassen<a class="anchor" aria-label="anchor" href="#omtrekklassen"></a>
</h4>
<p>De opdrachtgever verwacht als resultaat een hoogteschatting voor elke
omtrekklasse (per stap van 0,1 m, bv. de klasse van 0,35 m bevat de
omtrekken tussen 0,30 en 0,40 m). Bovendien is voor een deel van de
aangeleverde gegevens de omtrek niet exact gemeten, maar weergegeven als
omtrekklassen. Om deze redenen is gekozen om het model niet op te
stellen op basis van een continue variabele omtrek, maar op basis van
een discrete variabele “omtrekklasse”. Een continue variabele zou eerder
een vals gevoel van nauwkeurigheid geven, want de gemeten omtrekken zijn
afgerond tot op een bepaalde meeteenheid, dus het zijn sowieso discrete
variabelen.</p>
<p>Als de omtrekklassen als categorische variabelen gedefinieerd zouden
worden, zou het model louter bestaan uit een geschatte hoogte per
omtrekklasse, waarbij het verband tussen omtrek(klasse) en hoogte niet
in rekening gebracht kan worden. Het gevolg is dat “afwijkende”
hoogteschattingen binnen een model niet gecorrigeerd zouden worden op
basis van hoogteschattingen van andere omtrekklassen. Als de
omtrekklassen als discrete variabelen gedefinieerd worden, waar we hier
voor gekozen hebben, kan het model wel opgesteld worden als een verband
tussen omtrek(klasse) en hoogte.</p>
<p>Het feit dat de omtrekklassen gedefinieerd zijn als een discrete
variabele, heeft als belangrijk gevolg dat <strong>het model resulteert
in een schatting per omtrekklasse en dus niet in een continu verband
tussen omtrek en hoogte</strong>. Dit is zeer belangrijk om rekening mee
te houden bij de interpretatie van de gegevens.</p>
</div>
<div class="section level4">
<h4 id="scope-voor-omtrekklassen">Scope voor omtrekklassen<a class="anchor" aria-label="anchor" href="#scope-voor-omtrekklassen"></a>
</h4>
<p>De opdrachtgever gaf ons het relevante bereik wat betreft de
diameter: tussen 15 en 75 cm DBH, wat overeenkomt met de omtrekklassen
tussen 0,5 en 2,3 m. Focus ligt dus op een goede voorspelling binnen dit
interval (scope), en de berekening van de foutenmarge (RMSE) gebeurt in
elk van de modellen voor dit interval. (Noot: in de praktijk zijn zelden
bomen met omtrek groter dan 1,5 tot 2 m opgemeten, waardoor het maximum
van het model vaak lager ligt dat 2,3 m.) Waar metingen het toelaten,
zou de opdrachtgever het model wel graag kunnen uitbreiden naar
omtrekklassen tot 3 m.</p>
<p>Vermits metingen buiten het relevante interval ook een invloed hebben
op de vorm van de curve binnen dat interval (ze “trekken” aan de hele
curve), is het belangrijk om goed de invloed na te gaan van het al dan
niet meenemen van deze metingen. Omdat we voor het basismodel en lokaal
model gemerkt hebben dat het meenemen van de metingen van de lagere
omtrekklassen vaak een betere curvevorm geeft bij de gekozen wiskundige
functie, hebben we ervoor gekozen om deze lagere omtrekklassen mee te
nemen voor het berekenen van het model. Bij hogere omtrekklassen, die
eigenlijk niet zo vaak voorkwamen, zagen we dit voordeel niet. Daarom
hebben we bomen met omtrek &gt; 2,4 m weggelaten voor het basismodel en
het lokaal model. Er is hier wel een mogelijkheid voorzien om achteraf
het model uit te breiden naar omtrekklassen tot 3 m (door toepassing van
het model)</p>
<p>Voor het berekenen van het afgeleid model (= verschuiving van het
Vlaams model) worden de lagere omtrekklassen (&lt; 0,5 m) niet
meegenomen. Bij de berekening van de foutenmarge (RMSE) worden deze
omtrekklassen ook niet meegenomen. Hier bekom je immers het meest
optimale model voor je scope als je de Vlaamse curve verschuift zodat
deze zo dicht mogelijk aansluit bij de metingen van het gekozen interval
(in dit geval alle omtrekklassen tussen 0,5 en 2,8 m). Bij het meenemen
van lagere omtrekklassen bepalen deze metingen mee de ligging van de
curve, met een (mogelijk) minder goede benadering in het gekozen
interval tot gevolg.</p>
</div>
<div class="section level4">
<h4 id="bruikbaar-interval-q5k-en-q95k">Bruikbaar interval: <code>Q5k</code> en <code>Q95k</code><a class="anchor" aria-label="anchor" href="#bruikbaar-interval-q5k-en-q95k"></a>
</h4>
<p>De “randpunten” van het gebruikte interval (dus de metingen aan het
minimum en maximum van het gekozen interval) hebben door de zogenaamde
hefboomwerking vaak een zeer grote invloed op het model (de vorm van de
curve). Als deze metingen betrouwbaar zijn en in lijn liggen met de
andere metingen, “trekken” ze vaak de curve in de juiste vorm. Anders is
als deze metingen potentieel afwijkend zijn, want dan kunnen ze de hele
curve in een verkeerde richting trekken, wat uiteraard ongewenst is. Dit
probleem kan zich potentieel voordoen als er aan de rand van het
interval maar enkele metingen gebeurd zijn, omdat deze toevallig kunnen
afwijken van andere metingen. We verwachten dat dit probleem zich niet
zal voordoen als de uiterste omtrekklassen veel metingen bevatten, want
de kans is zeer klein dat deze allemaal afwijkend zijn (dus we gaan
ervan uit dat het gemiddelde van deze grotere groep metingen geen
afwijkend cijfer oplevert). We kunnen dit probleem dus vermijden door te
zorgen dat de uiterste omtrekklassen nooit bestaan uit weinig metingen,
wat eenvoudigweg kan door de grenzen van het gebruikte interval te
bepalen op basis van kwantielen: we gebruiken de gegevens tussen het
kwantiel van 2,5% min 1 omtrekklasse (<code>Q5k</code>) en kwantiel van
97,5% plus 1 omtrekklasse (<code>Q95k</code>), waarbij telkens de
volledige omtrekklasse genomen wordt waarin de betreffende waarde valt.
We noemen dit interval het bruikbaar interval, en we gebruiken enkel de
gegevens binnen dit interval voor het berekenen van de modellen.</p>
<p>Dit is tevens het interval waarin het model voldoende betrouwbare
schattingen levert.</p>
<p>Bij een basismodel en lokaal model wordt de curvevorm bepaald door
het gefitte model, dus voor deze twee modellen is het relevant om
`mogelijk onbetrouwbare´ randpunten weg te laten en dus enkel de punten
binnen het bruikbaar interval te gebruiken om het model te fitten. Bij
het afgeleide model, dat een verschuiving is van het Vlaamse model,
vormen deze randpunten geen probleem, dus hier worden alle metingen
meegenomen.</p>
</div>
<div class="section level4">
<h4 id="functie-initiatie">Functie <code>initiatie()</code><a class="anchor" aria-label="anchor" href="#functie-initiatie"></a>
</h4>
<p>De functie <code><a href="../reference/initiatie.html">initiatie()</a></code> berekent per
boomsoort-domeincombinatie enkele variabelen die verband houden met dit
bruikbaar interval:</p>
<ul>
<li>bruikbaar interval (<code>Q5k</code> en <code>Q95k</code>)</li>
<li>aantal bomen (<code>nBomen</code>), waarbij de bomen met omtrek &gt;
3,0 m buiten beschouwing gelaten worden</li>
<li>aantal bomen met omtrek tussen 0,5 en 2,8 m
(<code>nBomenOmtrek05</code>)</li>
<li>aantal bomen binnen bruikbaar interval
(<code>nBomenInterval</code>)</li>
<li>aantal bomen binnen bruikbaar interval met omtrek &gt; 0,5 m
(<code>nBomenIntervalOmtrek05</code>)</li>
</ul>
<p>Op basis van het aantal bomen (binnen het bruikbaar interval) met
omtrek &gt; 0,5 m splitst de functie <code><a href="../reference/initiatie.html">initiatie()</a></code> de dataset
op in functie van de verschillende modeltypen (zie <a href="#initiatie">initiatie onder praktische werkwijze</a> en zie uitleg
hierboven over bruikbaar interval).</p>
</div>
</div>
<div class="section level3">
<h3 id="keuze-van-modellen">Keuze van modellen<a class="anchor" aria-label="anchor" href="#keuze-van-modellen"></a>
</h3>
<div class="section level4">
<h4 id="algemeen">Algemeen<a class="anchor" aria-label="anchor" href="#algemeen"></a>
</h4>
<p>Voor de keuze van de wiskundige vergelijking die binnen het bruikbaar
interval een goede schatting geeft, hebben we 17 modellen uit de
literatuur uitgetest. Voor de selecties hebben we ons voornamelijk
gebaseerd op de <a href="#rmse">RMSE</a>, die aangeeft hoe goed het
model de metingen benadert. Bijkomend hebben we de curvevorm visueel
beoordeeld, wat in feite een gelijkaardig resultaat gaf. We zijn in 4
fasen te werk gegaan:</p>
<ul>
<li><p>alle modellen getest voor de metingen van beuk uit Zoniënwoud en
de slechtste modellen geschrapt</p></li>
<li><p>de overblijvende modellen getest op de metingen van beuk van 4
andere domeinen met veel beuken</p></li>
<li>
<p>de 5 beste modellen (geselecteerd in voorgaande stappen) ook
getest voor grove den en zomereik (telkens voor de domeinen met het
meeste metingen). Deze modellen zijn:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mi>A</mi><mo>+</mo><mi>B</mi><mi>.</mi><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mo>+</mo><mi>C</mi><mi>.</mi><msup><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mrow><mspace width="0.278em"></mspace><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim A + B.{Omtrek}+C.{Omtrek}^{\;2}</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mn>1</mn><mo>,</mo><mn>3</mn><mo>+</mo><mfrac><msup><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mrow><mspace width="0.278em"></mspace><mn>2</mn></mrow></msup><mrow><mi>A</mi><mo>+</mo><mi>B</mi><mi>.</mi><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mo>+</mo><mi>C</mi><mi>.</mi><msup><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mrow><mspace width="0.278em"></mspace><mn>2</mn></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">Hoogte \sim 1,3+\frac{{Omtrek}^{\;2}}{A+B.{Omtrek}+C.{Omtrek}^{\;2}}</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><msup><mi>e</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim e^{(A + B \log({Omtrek}) + C \log({Omtrek})^{2})}</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Hoogte \sim A+B \log({Omtrek})</annotation></semantics></math><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><msup><mi>e</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mi>.</mi><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow><mo stretchy="true" form="postfix">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim e^{(A + B\log({Omtrek}) + C.{Omtrek})}</annotation></semantics></math></p>
</li>
<li><p>een alternatief model met gelijkaardige karakteristieken dat in
de oorspronkelijke lijst ontbrak, op dezelfde manier getest:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim A+B \log({Omtrek})+C \log({Omtrek})^2</annotation></semantics></math></p></li>
</ul>
<p>Uiteindelijk hebben we uit deze 6 modellen 2 modellen gekozen die in
al de geteste omstandigheden een goede schatting gaven: een exponentieel
model
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><msup><mi>e</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim e^{(A + B\log(Omtrek) + C\log(Omtrek)^2)}</annotation></semantics></math>)
en het zelf toegevoegde alternatief. Dit laatste heeft als voordeel dat
het een lineair model is, wat een groot voordeel is voor de berekeningen
(fitten van model) en de interpretatie van de parameters A, B en C.
Vandaar dat we dit model gekozen hebben:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim A + B\log(Omtrek)+C\log(Omtrek)^2</annotation></semantics></math></p>
</div>
<div class="section level4">
<h4 id="basismodel">Basismodel<a class="anchor" aria-label="anchor" href="#basismodel"></a>
</h4>
<p>Voor het basismodel starten we van het hierboven voorgestelde
algemene model. Om eventuele afwijkingen bij boomsoort-domeincombinaties
deels te corrigeren op boomsoortniveau, kiezen we om een mixed model te
maken per boomsoort waarin voor elk domein een extra parameter
toegevoegd wordt. De notatie hiervan is als volgt:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>b</mi><mi>a</mi><mi>s</mi><mi>i</mi><mi>s</mi></mrow></msub><mo>∼</mo><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>B</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>C</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte_{basis} \sim A_{Vlaams} + A_{domein} + (B_{Vlaams} + B_{domein})\log({Omtrek}) + (C_{Vlaams} + C_{domein})\log(Omtrek)^2</annotation></semantics></math>
Dit model bevat dus een soortspecifiek overkoepelend model met
parameters
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><annotation encoding="application/x-tex">A_{Vlaams}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><annotation encoding="application/x-tex">B_{Vlaams}</annotation></semantics></math>
en
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><annotation encoding="application/x-tex">C_{Vlaams}</annotation></semantics></math>
(in vaktermen <em>fixed factor</em> genoemd), wat we definiëren als
“<strong>Vlaams model</strong>”. Daarnaast bevat het model de
domeinspecifieke parameters
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">A_{domein}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>B</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">B_{domein}</annotation></semantics></math>
en
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">C_{domein}</annotation></semantics></math>
(in vaktermen <em>random factor</em> genoemd), die gesommeerd met de
overkoepelende parameters de parameters voor het domeinspecifieke model
geven.</p>
<p><img src="Handleiding_files/figure-html/figBasismodel-1.png" alt="naar boven toe afgebogen curves van enkele domeinmodellen (dunne lijnen) en een Vlaams model (dikke lijn) die in het midden tussen de domeinmodellen ligt" width="576"></p>
<p>Dit overkoepelend Vlaams model wordt berekend op basis van alle
gegevens, waarbij domeinen met veel gegevens zwaarder doorwegen op het
eindresultaat. De domeinspecifieke modellen worden grotendeels berekend
op basis van de gegevens van dat domein, maar er wordt ook gecorrigeerd
op basis van het overkoepelende Vlaams model. Hierbij zal de invloed van
het Vlaams model zwaarder doorwegen in domeinen en/of specifieke
omtrekklassen waar niet veel domeinspecifieke gegevens beschikbaar zijn.
Als er voldoende domeinspecifieke gegevens beschikbaar zijn, zal het
domeinmodel vooral daarop gebaseerd zijn.</p>
<p>Dit betekent dus dat het Vlaams model de domeinspecifieke modellen
corrigeert waar onvoldoende gegevens beschikbaar zijn, wat vaak
resulteert in een “beter” model dat nauwer aansluit bij het Vlaams model
(dat meestal een goede curvevorm heeft is omdat het gebaseerd is op veel
gegevens).</p>
<p>Voorwaarde om goede modellen te bekomen op basis van dit mixed model,
is dat er voldoende gegevens beschikbaar zijn. Op basis van ervaring met
het gebruik van deze statistische modellen en op basis van eerste
testresultaten hebben we volgende voorwaarden voor het basismodel
vastgelegd:</p>
<ul>
<li>boomsoorten met &gt; 50 metingen per domein in de omtrekklassen
tussen 0,5 en 2,3 m en &gt;= 6 domeinen</li>
<li>lagere omtrekklassen worden niet meegeteld maar wel meegenomen om
het model te fitten (zie <a href="#scope-voor-omtrekklassen">Bruikbaar
interval / Scope voor omtrekklassen</a>)</li>
</ul>
</div>
<div class="section level4">
<h4 id="afgeleid-model">Afgeleid model<a class="anchor" aria-label="anchor" href="#afgeleid-model"></a>
</h4>
<p><strong>Wat als er niet genoeg metingen zijn om een basismodel te
berekenen?</strong> Een eerste idee was om “vergelijkbare” domeinen te
clusteren, zodat niet voor elk domein een apart model moest opgesteld
worden en modellen van “vergelijkbare” domeinen zouden kunnen gebruikt
worden om hoogtes te schatten voor domeinen met weinig metingen. Maar
wat is “vergelijkbaar”, op basis van welke variabele kunnen we de
domeinen clusteren? Hiervoor hebben we gezocht naar een correlatie
tussen karakteristieken van de opgestelde modellen enerzijds (parameters
A, B en C, en hoogteschattingen voor bepaalde omtrekklassen) en
potentiële verklarende variabelen anderzijds: bodemtype, ecoregio,
provincie (~ beheermethode) en ruimtelijke spreiding (getest door
resultaten op kaart weer te geven). Er bleek een vaag verband te zijn
met bodemtype en ecoregio in de zin dat parameter A en de
hoogteschattingen bij (ecoregio’s met) rijkere bodemtypen over het
algemeen een hogere waarde hebben (wat intuïtief te verwachten was),
maar hierbij was nog veel onverklaarbare variatie aanwezig. Zo hadden
dicht bij elkaar gelegen bossen soms afwijkende modellen terwijl we hier
geen verklaring voor vonden. Dit idee hebben we verlaten bij gebrek aan
een duidelijke verklarende variabele voor de variatie tussen de
modellen.</p>
<p>Wat wel een zinvolle methode bleek ingeval van te weinig metingen, is
de curve van het Vlaams model (het overkoepelende soortspecifieke model
van het basismodel) in hoogte te verschuiven zodat ze terechtkomt in de
puntenwolk van de opgemeten punten van het domein. Dit levert het
volgende model op:</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>a</mi><mi>f</mi><mi>g</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>i</mi><mi>d</mi></mrow></msub><mo>∼</mo><mi>δ</mi><mi>A</mi><mo>+</mo><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">Hoogte_{afgeleid} \sim \delta A + Hoogte_{Vlaams}</annotation></semantics></math></p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mphantom><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>a</mi><mi>f</mi><mi>g</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>i</mi><mi>d</mi></mrow></msub></mrow></mphantom><mo>=</mo><mi>δ</mi><mi>A</mi><mo>+</mo><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\phantom{Hoogte_{afgeleid}}= \delta A + A_{Vlaams} + B_{Vlaams}\log(Omtrek) + C_{Vlaams} \log(Omtrek)^2</annotation></semantics></math></p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mphantom><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>a</mi><mi>f</mi><mi>g</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>i</mi><mi>d</mi></mrow></msub></mrow></mphantom><mo>=</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>+</mo><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\phantom{Hoogte_{afgeleid}}= A_{domein} + A_{Vlaams} + B_{Vlaams}\log(Omtrek) + C_{Vlaams} \log(Omtrek)^2</annotation></semantics></math></p>
<p>Wat in feite gebeurt, is dat de gemiddelde afstand tussen de
meetpunten van het domein en de Vlaamse curve berekend wordt, en dat de
Vlaamse curve verticaal over deze hoogte verschoven wordt. Deze
“verschuiving” is een domeinspecifieke parameter
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">A_{domein}</annotation></semantics></math>
die corrigeert voor de standplaats (arm / rijk) op basis van effectieve
metingen van dat domein; de andere parameters zijn overgenomen uit het
Vlaams model. De curvevorm wordt dus overgenomen van het Vlaams model,
dat berekend is op basis van een groot aantal gegevens uit verschillende
domeinen.</p>
<p><img src="Handleiding_files/figure-html/figAfgeleidModel-1.png" alt="curve van Vlaams model en van daaruit pijlen naar een lager geleden identieke curve, het Afgeleid model" width="576"></p>
<p>Om een zo goed mogelijk model te bekomen voor de omtrekklassen tussen
0,5 en 2,8 m, wordt het model berekend op basis van enkel de gegevens
binnen deze omtrekklassen. Het meenemen van lagere omtrekklassen kan
immers als gevolg hebben dat het model een minder goede benadering geeft
voor de omtrekklassen boven 0,5 m omdat de lagere omtrekklassen dan ook
de gemiddelde afstand beïnvloeden.</p>
<p>Omdat de curvevorm berekend is op basis van het Vlaams model en de
domeinspecifieke gegevens enkel nodig zijn om de verschuiving te
berekenen, volstaan 10 metingen voor het berekenen van een afgeleid
model.</p>
<p>Dus samengevat: de voorwaarden voor een afgeleid model zijn:</p>
<ul>
<li>onvoldoende metingen om deel uit te maken van een basismodel</li>
<li>domeinen met minstens 10 metingen in de omtrekklassen tussen 0,5 en
2,8 m</li>
<li>lagere omtrekklassen worden niet meegenomen om het model te
berekenen</li>
</ul>
</div>
<div class="section level4">
<h4 id="lokaal-model">Lokaal model<a class="anchor" aria-label="anchor" href="#lokaal-model"></a>
</h4>
<p><strong>Wat als er voor een boomsoort geen 6 domeinen zijn om een
basismodel te berekenen?</strong> Als er minder dan 6 domeinen zijn met
genoeg gegevens om een basismodel te berekenen (&gt; 50 metingen), dan
is de kans groot dat het overkoepelende model (Vlaams model) sterk
beïnvloed gaat worden door een of enkele domeinen met veel gegevens en
bijgevolg niet representatief gaat zijn voor domeinen over heel
Vlaanderen. Dit heeft negatieve gevolgen voor zowel het basismodel zelf
(het overkoepelend model gaat de modellen van de domeinen met minder
gegevens sterk beïnvloeden) als de afgeleide modellen die hieruit
berekend worden (deze worden rechtstreeks afgeleid uit dat minder
representatieve Vlaams model).</p>
<p>In geval er van minder dan 6 domeinen voldoende gegevens zijn, is het
basismodel onder de vorm van een mixed model bijgevolg niet aangewezen.
Voor de domeinen met meer dan 50 metingen, kan echter wel een “gewoon”
lineair model (fixed model zonder random factor) berekend worden op
basis van enkel de gegevens van dat domein. Hierbij vallen dan wel de
voordelen weg dat het model gecorrigeerd wordt waar er weinig gegevens
zijn (zie <a href="#basismodel">basismodel</a>) en dat er voor deze
boomsoort afgeleide modellen berekend kunnen worden. Dit model, wat we
lokaal model noemen, ziet er als volgt uit:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>l</mi><mi>o</mi><mi>k</mi><mi>a</mi><mi>a</mi><mi>l</mi></mrow></msub><mo>∼</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>+</mo><msub><mi>B</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><msub><mi>C</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte_{lokaal} \sim A_{domein} + B_{domein}\log({Omtrek}) + C_{domein}\log(Omtrek)^2</annotation></semantics></math></p>
<p>De voorwaarden voor dit lokaal model zijn:</p>
<ul>
<li>geen basismodel</li>
<li>minstens 50 metingen per domein in de omtrekklassen tussen 0,5 en
2,3 m</li>
<li>lagere omtrekklassen worden meegenomen om het model te berekenen
(zie <a href="#scope-voor-omtrekklassen">Bruikbaar interval / Scope voor
omtrekklassen</a>)</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="kwaliteitsbeoordeling">Kwaliteitsbeoordeling<a class="anchor" aria-label="anchor" href="#kwaliteitsbeoordeling"></a>
</h3>
<p>De kwaliteitsbeoordeling of validatie richt zich enerzijds op
afwijkende metingen en anderzijds op afwijkende curvevormen. Als error
om het betrouwbaarheidsinterval te berekenen met het oog op het
selecteren van de afwijkende metingen, gebruiken we de <em>root mean
square error</em> (RMSE), die we eerst behandelen.</p>
<div class="section level4">
<h4 id="rmse">RMSE<a class="anchor" aria-label="anchor" href="#rmse"></a>
</h4>
<p>RMSE of <em>root mean square error</em> is een maat voor de spreiding
van de metingen t.o.v. de opgestelde modelcurve. Deze error is qua
principe vergelijkbaar met een standaard error voor individuele
gemiddelden (gebaseerd op een som van gekwadrateerde afstanden tussen
meting en schatting) en kan dus gebruikt worden om
betrouwbaarheidsintervallen te berekenen.</p>
<p>Omgekeerd geeft deze spreidingsmaat informatie over de ligging van de
modelcurve ten opzichte van de metingen, waardoor deze waarde ook
gebruikt kan worden om modellen te beoordelen of te vergelijken. Zo
hebben we voor de keuze van ons model (wiskundige vergelijking, zie <a href="#keuze-van-modellen">keuze van modellen</a>) verschillende
modellen opgesteld op basis van dezelfde dataset en op basis van de RMSE
de “beste” modellen geselecteerd (= modellen die de metingen het dichtst
benaderen).</p>
<p>We berekenen de RMSE voor het <strong>basismodel</strong> en het
<strong>lokaal model</strong> door cross-validatie op basis van 6
subsets (dit gebeurt in de functie <code>rmse.basis</code>). Meer
specifiek doorlopen we volgende stappen:</p>
<ul>
<li>dataset opsplitsen in 6 gelijke delen door de dataset te sorteren
volgens boomsoort, domein, omtrekklasse en hoogte en aan de rijen
alternerend de nummers 1 tot 6 toe te kennen</li>
<li>model opstellen op basis van 5 delen</li>
<li>model toepassen op de records van het zesde deel, dus de hoogte
schatten op basis van de gemeten omtrekklasse en het opgestelde
model</li>
<li>de twee voorgaande stappen 6 keer herhalen zodat elk record een
schatting heeft</li>
<li>maat voor fit berekenen:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><msqrt><mfrac><mrow><mo>∑</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>g</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>t</mi><mi>e</mi><mi>n</mi></mrow></msub><mo>−</mo><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>g</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow></mfrac></msqrt></mrow><annotation encoding="application/x-tex">RMSE = \sqrt{\frac{\sum{(Hoogte_{gemeten} - Hoogte_{geschat})^2}}{n - 2}}</annotation></semantics></math>
</li>
</ul>
<p>Voor het <strong>afgeleid model</strong>, dat een verschuiving van
het Vlaams model is, wordt voor de RMSE beide toegepaste modellen in
rekening gebracht:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi><mo>=</mo><msqrt><mrow><mi>R</mi><mi>M</mi><mi>S</mi><msubsup><mi>E</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow><mn>2</mn></msubsup><mo>+</mo><mi>R</mi><mi>M</mi><mi>S</mi><msubsup><mi>E</mi><mrow><mi>V</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>c</mi><mi>h</mi><mi>u</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding="application/x-tex">RMSE = \sqrt{RMSE_{Vlaams}^2 + RMSE_{Verschuiving}^2}</annotation></semantics></math>
Hierbij wordt
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>M</mi><mi>S</mi><msub><mi>E</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">RMSE_{Vlaams}</annotation></semantics></math>
berekend volgens de hierboven beschreven methode (waarbij de hoogte
geschat wordt op basis van het Vlaams model en alle metingen die
gebruikt zijn om het basismodel in kwestie op te stellen). Voor
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>M</mi><mi>S</mi><msub><mi>E</mi><mrow><mi>V</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>c</mi><mi>h</mi><mi>u</mi><mi>i</mi><mi>v</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub></mrow><annotation encoding="application/x-tex">RMSE_{Verschuiving}</annotation></semantics></math>
wordt omwille van het beperkt aantal records voor de
boomsoort-domeincombinatie voor elk punt een schatting gemaakt op basis
van van een model dat opgesteld is op basis van de dataset zonder dat
ene punt, waarna de RMSE op dezelfde manier berekend wordt. (Voor deze
laatste berekening is de functie <code><a href="../reference/rmse.verschuiving.html">rmse.verschuiving()</a></code>
ontwikkeld.)</p>
<p>Op basis van de RMSE kan een <strong>betrouwbaarheidsinterval
(BI)</strong> berekend worden voor een voorspelde <em>gemiddelde</em>
boomhoogte:</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><msub><mi>I</mi><mrow><mi>g</mi><mi>e</mi><mi>m</mi><mi>i</mi><mi>d</mi><mi>d</mi><mi>.</mi><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi></mrow></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>g</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>−</mo><mfrac><mrow><mn>1.96</mn><mo>*</mo><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi></mrow><msqrt><mi>n</mi></msqrt></mfrac><mo>,</mo><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><msub><mi>e</mi><mrow><mi>g</mi><mi>e</mi><mi>s</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi></mrow></msub><mo>+</mo><mfrac><mrow><mn>1.96</mn><mo>*</mo><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi></mrow><msqrt><mi>n</mi></msqrt></mfrac><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">BI_{gemidd.Hoogte} = [Hoogte_{geschat} - \frac{1.96 * RMSE}{\sqrt{n}}, Hoogte_{geschat} + \frac{1.96 * RMSE}{\sqrt{n}}]</annotation></semantics></math></p>
<p>met n het aantal bomen van dezelfde diameter waarvoor het BI berekend
wordt en 1.96 een benaderende waarde die in R het meest accuraat
berekend wordt met <code>qnorm(0.975)</code>.</p>
<p>De werkelijke hoogte van individuele bomen kan overschat of
onderschat worden, wat resulteert in een relatief breed BI. Het
gemiddelde van meerdere bomen zal echter een kleinere spreiding hebben
dan een individuele boom, omdat deze bomen een mix zijn van
onderschattingen en overschattingen. Hoe groter het aantal bomen
waarvoor de voorspelling gebeurt, hoe beter de onder- en overschattingen
uitgemiddeld worden en hoe kleiner het BI, wat geïllustreerd wordt in
onderstaande grafiek.</p>
<p><img src="Handleiding_files/figure-html/figBIbomen-1.png" alt="5 punten met error bars die van breed naar smal gaan als het aantal bomen toeneemt" width="576"></p>
</div>
<div class="section level4">
<h4 id="afwijkende-metingen">Afwijkende metingen<a class="anchor" aria-label="anchor" href="#afwijkende-metingen"></a>
</h4>
<p>We beschouwen een meting als afwijkend als de afwijking van het model
groter is dan
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>,</mo><mn>5</mn><mo>*</mo><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">2,5 * RMSE</annotation></semantics></math>,
dus als de meting buiten het interval ligt dat begrensd wordt door
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>−</mo><mn>2</mn><mo>,</mo><mn>5</mn><mo>*</mo><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">schatting - 2,5 * RMSE</annotation></semantics></math>
en
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>c</mi><mi>h</mi><mi>a</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>+</mo><mn>2</mn><mo>,</mo><mn>5</mn><mo>*</mo><mi>R</mi><mi>M</mi><mi>S</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">schatting + 2,5 * RMSE</annotation></semantics></math>.</p>
<p><img src="Handleiding_files/figure-html/figBetrouwbaarheidsinterval-1.png" alt="curve met zwarte punten en een vage grijze band rond, en enkele rode punten die buiten die band vallen en de afwijkende metingen voorstellen" width="576"></p>
<p><strong>Potentieel probleem?</strong> Bij modellen waarbij de RMSE
hoog is (bv. hoge spreiding van de metingen of model minder goed
aansluitend bij de metingen), zal het betrouwbaarheidsinterval groter
zijn, waardoor het risico bestaat dat potentieel afwijkende metingen nog
binnen het betrouwbaarheidsinterval vallen en niet als afwijkend
aangeduid worden. Om te vermijden om zo potentiële foute metingen te
missen (modellen zonder problemen worden niet in de validatierapporten
opgenomen), zijn per modeltype (basis / afgeleid / lokaal) voor de 20
domeinen met de hoogste RMSE minstens de 10 metingen met grootste
afwijking geselecteerd.</p>
<p>(Deze afwijkende metingen worden berekend in de functie
<code><a href="../reference/afwijkendeMetingen.html">afwijkendeMetingen()</a></code> die door de functie
<code><a href="../reference/validatie.basis.html">validatie.basis()</a></code>, <code><a href="../reference/validatie.afgeleid.html">validatie.afgeleid()</a></code> of
<code><a href="../reference/validatie.lokaal.html">validatie.lokaal()</a></code> aangeroepen wordt.)</p>
</div>
<div class="section level4">
<h4 id="afwijkende-curvevorm">Afwijkende curvevorm<a class="anchor" aria-label="anchor" href="#afwijkende-curvevorm"></a>
</h4>
<p>Vermits het afgeleid model de vorm overneemt van het Vlaams model
(dat in principe een goede curvevorm heeft), wordt een afwijkende
curvevorm enkel onderzocht voor het basismodel en het lokaal model. (De
selectie van afwijkende curves gebeurt met de functie
<code><a href="../reference/afwijkendeCurves.html">afwijkendeCurves()</a></code>, enkel de noodzakelijke variabelen
berekenen kan met de functie <code><a href="../reference/curvekarakteristieken.html">curvekarakteristieken()</a></code>.)</p>
<p>De detectie van afwijkende curvevormen is gebaseerd op het voorkomen
van extremen (minima of maxima). Dit zijn de punten waarop de afgeleide
van de functie 0 is. Voor ons model treden extremen op bij een omtrek
van
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>e</mi><mfrac><mrow><mo>−</mo><mi>B</mi></mrow><mrow><mn>2</mn><mi>C</mi></mrow></mfrac></msup><annotation encoding="application/x-tex">e^{\frac{-B}{2 C}}</annotation></semantics></math>.</p>
<p>Er kunnen zich 2 situaties voordoen die potentieel afwijkend zijn
(beschreven onder <a href="#stap-2-afwijkende-curves">Praktische
werkwijze / validatie / stap 2: afwijkende curves</a>):</p>
<ul>
<li>
<p>“curvevorm hol bij lage omtrekklassen”: de hiervoor geselecteerde
curves voldoen aan volgende voorwaarden:</p>
<ul>
<li>minimum bij omtrek &gt; 0.1 m</li>
<li>buigpunt ligt boven het begin van het bruikbare interval</li>
<li>verschil in richtingscoëfficiënt tussen begin van bruikbare interval
en buigpunt &gt; 1 (om nagenoeg rechte curves en curves met buigpunt aan
het begin van het bruikbaar interval uit de selectie te halen: deze
vertonen geen holle curvevorm)</li>
</ul>
</li>
<li><p>“curve daalt terug bij hoge omtrekklassen”: de hiervoor
geselecteerde curves hebben een maximum binnen het bruikbare
interval</p></li>
</ul>
<p>(Nota: Een buigpunt doet zich voor waar de tweede afgeleide van de
functie 0 is, wat in dit geval is bij een omtrek van
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>e</mi><mfrac><mrow><mn>1</mn><mo>−</mo><mi>B</mi></mrow><mrow><mn>2</mn><mi>C</mi></mrow></mfrac></msup><annotation encoding="application/x-tex">e^{\frac{1-B}{2 C}}</annotation></semantics></math>.
En een richtingscoëfficiënt (rico) kan berekend worden op basis van de
eerste afgeleide, dus voor een welbepaalde omtrek is de rico
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><mrow><mn>2</mn><mi>C</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>B</mi></mrow><mrow><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi></mrow></mfrac><annotation encoding="application/x-tex">\frac{2 C \log({Omtrek}) + B}{Omtrek}</annotation></semantics></math>.)</p>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="section level3">
<h3 id="berekening-resultaat">Berekening resultaat<a class="anchor" aria-label="anchor" href="#berekening-resultaat"></a>
</h3>
<div class="section level4">
<h4 id="output-voor-implementatie-in-ivanho">output voor implementatie in IVANHO<a class="anchor" aria-label="anchor" href="#output-voor-implementatie-in-ivanho"></a>
</h4>
<p>De functie <code><a href="../reference/outputIVANHO.html">outputIVANHO()</a></code> geeft hoogteschattingen voor
de “bruikbare” omtrekklassen, dus de omtrekklassen binnen het bruikbaar
interval of net erbuiten (van 3 omtrekklassen onder tot 2 omtrekklassen
boven het bruikbaar interval). Deze tabel kan dus rechtstreeks, zonder
verdere berekeningen of randvoorwaarden, geraadpleegd worden om
hoogteschattingen op te zoeken of in <code>IVANHO</code> opgenomen
worden. Hierdoor wordt ook vermeden dat er rekenfouten optreden doordat
het model in dit R-package aangepast wordt maar niet in
<code>IVANHO</code>, of omgekeerd.</p>
<p>Voor curves met een maximum binnen het bruikbaar interval, wordt de
hoogteschatting gelijkgesteld aan dit maximum voor omtrekklassen boven
de omtrekklasse waarin zich dit maximum voordoet. Voor curves met een
minimum binnen het bruikbaar interval, wordt de hoogteschatting
gelijkgesteld aan dit minimum voor omtrekklassen onder de omtrekklasse
waarin zich dit minimum voordoet. Omtrekklassen worden weggelaten als de
hoogteschatting lager is dan 2,5 m.</p>
<p>(Nota: deze functie maakt gebruik van de functies
<code><a href="../reference/hoogteschatting.basis.html">hoogteschatting.basis()</a></code> en
<code><a href="../reference/hoogteschatting.afgeleid.html">hoogteschatting.afgeleid()</a></code> om de hoogtes te berekenen, en
van de functie <code><a href="../reference/curvekarakteristieken.html">curvekarakteristieken()</a></code> om de maxima in de
curves te detecteren.)</p>
<div class="section level5">
<h5 id="uitbreiding-naar-hogere-omtrekklassen-1">uitbreiding naar hogere omtrekklassen<a class="anchor" aria-label="anchor" href="#uitbreiding-naar-hogere-omtrekklassen-1"></a>
</h5>
<p>Bij voldoende gegevens in hogere omtrekklassen kan een model
uitgebreid worden, zie <a href="#uitbreiding-naar-hogere-omtrekklassen">uitbreiding naar hogere
omtrekklassen</a>. Met behulp van de functie
<code><a href="../reference/validatie.uitbreiding.html">validatie.uitbreiding()</a></code> wordt het eerder gefitte model
toegepast op hogere omtrekklassen (<code>&gt; Q95k</code>), waarna het
model bij deze hogere omtrekklassen gevalideerd wordt op basis van de
extra metingen. Voor deze validatie worden het minimum, het maximum en
de mediaan berekend van het verschil tussen de meting en de schatting op
basis van het model. De 20 slechtste modellen, die in het
validatierapport getoond worden, zijn de 20 modellen met het hoogste
absolute waarde voor de mediaan van het verschil tussen de meting en de
schatting. Dit zijn dus de modellen waarbij de middelste meting het
meest afwijkt van de schatting. Naast een validatierapport wordt ook een
dataframe gegenereerd (met <code>DOMEIN_ID</code>, <code>BMS</code> en
<code>MaxOmtrek</code>) dat kan meegenomen worden in
<code><a href="../reference/outputIVANHO.html">outputIVANHO()</a></code> om de eventuele uitbreiding toe te voegen
aan de output van deze laatste functie.</p>
</div>
</div>
<div class="section level4">
<h4 id="modelparameters-per-domein">modelparameters per domein<a class="anchor" aria-label="anchor" href="#modelparameters-per-domein"></a>
</h4>
<p>De modelparameters kunnen opgevraagd worden met de functie
<code><a href="../reference/resultaat.html">resultaat()</a></code>. De berekeningswijze van de meeste info uit de
tabel die met de functie <code><a href="../reference/resultaat.html">resultaat()</a></code> gegenereerd wordt, is
eerder uitgelegd. De parameters <code>A</code>, <code>B</code> en
<code>C</code> worden berekend door de in het modeltype aanwezige
Vlaamse en domeinspecifieke parameters op te tellen. Dit betekent:</p>
<ul>
<li>voor het basismodel:
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">A = A_{Vlaams} + A_{domein}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>B</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">B = B_{Vlaams} + B_{domein}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>C</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C = C_{Vlaams} + C_{domein}</annotation></semantics></math></li>
</ul>
</li>
<li>voor het afgeleid model:
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><msub><mi>A</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">A = A_{Vlaams} + A_{domein}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><msub><mi>B</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">B = B_{Vlaams}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><msub><mi>C</mi><mrow><mi>V</mi><mi>l</mi><mi>a</mi><mi>a</mi><mi>m</mi><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C = C_{Vlaams}</annotation></semantics></math></li>
</ul>
</li>
<li>voor het lokaal model:
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><msub><mi>A</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">A = A_{domein}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><msub><mi>B</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">B = B_{domein}</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><msub><mi>C</mi><mrow><mi>d</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C = C_{domein}</annotation></semantics></math></li>
</ul>
</li>
</ul>
<p>Bijgevolg geldt voor elk van de modellen in de tabel de algemene
functie
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>o</mi><mi>g</mi><mi>t</mi><mi>e</mi><mo>∼</mo><mi>A</mi><mo>+</mo><mi>B</mi><mo>log</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mi>C</mi><mo>log</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>O</mi><mi>m</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Hoogte \sim A + B\log(Omtrek)+C\log(Omtrek)^2</annotation></semantics></math></p>
<p>(Nota: deze parameters kunnen berekend worden met de functie
<code><a href="../reference/modelparameters.html">modelparameters()</a></code>.)</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Els Lommelen, Thierry Onkelinx.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
